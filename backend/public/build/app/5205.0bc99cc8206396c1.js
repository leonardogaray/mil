"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5205],{5205:(O,g,i)=>{i.r(g),i.d(g,{HomePageModule:()=>j});var u=i(1929),D=i(6814),b=i(95),F=i(3554),f=i(5877),v=i(5861);const d=new class M{isPointInsidePolygon(o,e,t){const s=e,a=o;let l=!1;for(let p=0,c=t.length-1;p<t.length;c=p++){const y=t[p][0],h=t[p][1],P=t[c][1];h>a!=P>a&&s<(t[c][0]-y)*(a-h)/(P-h)+y&&(l=!l)}return l}csv2Json(o){let e=o.split("\n"),t=[],s=e[0].split(",");for(let a=1;a<e.length-1;a++){let l={},p=e[a].split(",");for(let c=0;c<s.length;c++)l[s[c]]=p[c];t.push(l)}return t}todayFormatted(){const o=new Date;return`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`}},I=new class S{loadData(){var o=this;return(0,v.Z)(function*(){const e=yield window.fetch("https://firms.modaps.eosdis.nasa.gov/api/country/csv/76db7f998faeaeb1d02f68b315bb5a12/MODIS_NRT/ARG/1/"+d.todayFormatted(),{method:"GET",headers:{Accept:"text/csv"}}),t=yield e.text();if(e.ok){let s=d.csv2Json(t);return o.processData(s)}return Promise.reject(e.statusText)})()}processData(o){const e=[[-60.7035826,-31.9551536],[-59.987548,-32.7282481],[-59.3283683,-33.2261903],[-59.1306144,-33.1111758],[-58.4439689,-33.2813436],[-58.3615714,-34.0498202],[-58.4879142,-34.4903853],[-60.2457267,-33.3685985],[-60.7016593,-32.8991555],[-60.8115226,-32.5199454],[-60.7071524,-31.9574472],[-60.3555905,-32.3289323]];return o.filter(s=>{const a=parseFloat(s.latitude),l=parseFloat(s.longitude);return d.isPointInsidePolygon(a,l,e)})}},x=new class T{loadData(){var o=this;return(0,v.Z)(function*(){const e=yield window.fetch("https://firms.modaps.eosdis.nasa.gov/api/country/csv/76db7f998faeaeb1d02f68b315bb5a12/VIIRS_SNPP_NRT/ARG/1/"+d.todayFormatted(),{method:"GET",headers:{Accept:"text/csv"}}),t=yield e.text();if(e.ok){let s=d.csv2Json(t);return o.processData(s)}return Promise.reject(e.statusText)})()}processData(o){const e=[[-60.7035826,-31.9551536],[-59.987548,-32.7282481],[-59.3283683,-33.2261903],[-59.1306144,-33.1111758],[-58.4439689,-33.2813436],[-58.3615714,-34.0498202],[-58.4879142,-34.4903853],[-60.2457267,-33.3685985],[-60.7016593,-32.8991555],[-60.8115226,-32.5199454],[-60.7071524,-31.9574472],[-60.3555905,-32.3289323]];return o.filter(s=>{const a=parseFloat(s.latitude),l=parseFloat(s.longitude);return d.isPointInsidePolygon(a,l,e)})}};var m=i(8433),r=i(5678);const H=[{path:"",component:(()=>{var n;class o{constructor(){this.lat=-33.27688650546989,this.lng=-59.820610521170714}ngAfterViewInit(){let t=m.DomUtil.get("map-home");t&&null!=t._leaflet_id&&t.remove();let s=this;navigator.geolocation.getCurrentPosition(function(a){s.initMap()},function(a){console.log("SSL Certificate required",a),s.initMap()},{timeout:1e4})}initMap(){const t=m.icon({iconUrl:"./assets/marker-icon.png",shadowUrl:"./assets/marker-shadow.png"});this.marker=m.marker([this.lat,this.lng],{icon:t}),this.map=m.map("map-home",{center:[this.lat,this.lng],zoom:11}),m.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.marker.addTo(this.map).bindPopup("<b>You are here</b>"),setTimeout(()=>{this.map.invalidateSize()},500),this.loadDataFromMODIS()}loadDataFromMODIS(){I.loadData().then(t=>{this.generateFires(t)}),x.loadData().then(t=>{this.generateFires(t)})}generateFires(t){let s=this;t.forEach(function(a){m.circle([a.latitude,a.longitude],{color:"red",fillColor:"red",fillOpacity:.5,radius:100}).addTo(s.map).bindPopup(`<b>Lat:</b> ${a.latitude}<br/><b>Lng:</b> ${a.longitude}<br/>`)})}}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-home"]],decls:8,vars:1,consts:[[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"map-container"],[1,"map-frame"],["id","map-home"]],template:function(t,s){1&t&&(r.TgZ(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-title",2),r._uU(4,"Home"),r.qZA()()(),r.TgZ(5,"div",3)(6,"div",4),r._UZ(7,"div",5),r.qZA()()()),2&t&&r.Q6J("fullscreen",!0)},dependencies:[u.W2,u.Gu,u.wd,u.sr],styles:[".map-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map-home[_ngcontent-%COMP%]{height:100%}"]}),o})()}];let w=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[f.Bz.forChild(H),f.Bz]}),o})(),j=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[u.Pc,D.ez,b.u5,F.e,w]}),o})()}}]);